{(function(){let n=$("#new-post-form");n.submit((function(o){o.preventDefault(),$.ajax({type:"post",url:"/posts/create",data:n.serialize(),success:function(n){let o=t(n.data.post);$("#post-list-section>ul").prepend(o),e(),window.toggleLike(),new Noty({theme:"light",type:"success",text:`${n.notyText}`,layout:"topRight",timeout:1500}).show()},error:function(t){console.log(t.responseText)}}),document.getElementById("new-post-form").reset()}))})();let t=function(t){return`\n        <div class="post-container">\n            <ul type="none">\n                <li id="post-${t._id}">\n                <small>\n                        <a class="post-delete-button" href="/posts/destroy/${t._id}">X</a>\n                </small>\n                ${t.content}\n                <small>\n                    <p>\n                        ${t.user.name}\n                    </p>\n                </small>\n                <div class="like-toggle">\n                <a class="like-button" href="/likes/toggle/?id=${t._id}&type=Post"><i class="far fa-thumbs-up"></i></a>\n                <small><span id="count-post-${t._id}-Likes">${t.likes.length}</span> Likes</small>\n            </div>\n                <hr>\n                <div class="post-comments">\n                    <form action="/comments/create" id="new-comment-input" method="POST">\n                        <input type="text" name="content" placeholder="write a comment..." required>\n                        <input type="hidden" name="post" value="${t._id}">\n                        <input type="submit" value="Add Comment">\n                    </form>\n                </div>\n                </li>\n            </ul>\n        </div>\n    `},e=function(){$(".post-delete-button").click((function(t){t.preventDefault(),$.ajax({method:"get",url:$(this).prop("href"),success:function(t){$(`#post-${t.data.post_id}`).remove(),new Noty({theme:"light",type:"success",text:`${t.notyText}`,layout:"topRight",timeout:1500}).show()},error:function(t){console.log(t.responseText)}})}))};e()}